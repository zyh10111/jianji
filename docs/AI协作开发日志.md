# 简记（NoteEase）—— AI协作开发日志

## AI协作开发日志

本文档记录了在开发"简记（NoteEase）"智能语音笔记App过程中，使用AI工具（如Cursor、GitHub Copilot等）进行辅助开发的关键功能实现过程，包括提示词的迭代过程和优化思路。

---

## 1. 项目初始化

### 1.1 项目创建
**目标**：创建React Native + Expo项目结构

**提示词1（初始）**：
```
创建一个React Native + Expo项目，项目名称为NoteEase，用于开发一个语音笔记应用。
```

**结果**：AI生成了基本的项目结构，但缺少详细的配置文件。

**提示词2（优化）**：
```
创建一个React Native + Expo项目，包含：
1. package.json文件，包含必要的依赖（expo-av、expo-speech、@react-native-async-storage/async-storage、@react-navigation/native等）
2. app.json配置文件，配置应用名称、图标、权限等
3. babel.config.js配置文件
4. .gitignore文件
5. 清晰的目录结构（src/screens、src/services、src/utils）
```

**结果**：生成了完整的项目结构和配置文件。

**学习点**：
- 需要明确指定所需的技术栈和依赖
- 需要详细的目录结构说明
- 需要包含必要的配置文件

---

## 2. 核心功能开发

### 2.1 笔记服务（noteService.js）

**目标**：实现笔记的CRUD操作和本地存储

**提示词1（初始）**：
```
创建一个笔记服务，用于保存和管理笔记数据。
```

**结果**：生成了基础的保存功能，但缺少完整的CRUD操作。

**提示词2（优化）**：
```
创建一个笔记服务模块（noteService.js），使用AsyncStorage进行本地存储，包含以下功能：
1. getAllNotes() - 获取所有笔记，按创建时间倒序排列
2. saveNote(note) - 保存笔记（支持创建和更新），note对象包含id、title、content、category、tags、createdAt、updatedAt
3. deleteNote(noteId) - 删除指定ID的笔记
4. getNoteById(noteId) - 根据ID获取笔记
5. searchNotes(query) - 搜索笔记（支持标题、内容、标签、分类搜索）
6. getCategories() - 获取所有分类列表（学习、生活、工作、灵感、其他）
需要完善的错误处理和代码注释。
```

**结果**：生成了完整的笔记服务模块，包含所有CRUD操作和搜索功能。

**学习点**：
- 需要明确列出所有需要的函数和功能
- 需要说明数据结构和存储方式
- 需要明确错误处理要求

---

### 2.2 语音服务（voiceService.js）

**目标**：实现语音转文字和智能分类功能

**提示词1（初始）**：
```
实现语音转文字功能。
```

**结果**：生成了基础的语音识别接口，但缺少实际的实现。

**提示词2（优化）**：
```
创建一个语音服务模块（voiceService.js），包含：
1. speechToText(audioUri) - 语音转文字功能（当前为模拟实现，返回示例文本，实际应用中应调用真实API如Google Speech-to-Text、百度语音识别等）
2. classifyContent(content) - 根据笔记内容智能分类，使用关键词匹配（学习、工作、生活、灵感、其他）
3. extractTags(content) - 从内容中提取标签（基于关键词）
4. 需要说明实际应用中如何接入真实API
5. 需要完善的代码注释
```

**结果**：生成了包含模拟实现和真实API接入说明的语音服务模块。

**学习点**：
- 需要明确当前是模拟实现还是真实实现
- 需要说明如何接入真实API
- 需要说明算法逻辑（如分类规则）

**提示词3（进一步优化）**：
```
优化classifyContent函数，使用正则表达式匹配关键词，分类规则：
- 学习：包含"学习"、"作业"、"考试"、"课程"、"笔记"、"复习"、"预习"
- 工作：包含"工作"、"会议"、"项目"、"任务"、"报告"、"客户"、"同事"
- 生活：包含"生活"、"购物"、"吃饭"、"休息"、"运动"、"健康"、"家人"、"朋友"
- 灵感：包含"创意"、"想法"、"灵感"、"设计"、"创新"、"项目"、"app"、"应用"
- 其他：不匹配上述关键词的内容
```

**结果**：优化了分类算法，使用正则表达式提高匹配准确性。

---

### 2.3 首页（HomeScreen.js）

**目标**：实现笔记列表展示和管理界面

**提示词1（初始）**：
```
创建一个首页组件，显示笔记列表。
```

**结果**：生成了基础的列表组件，但缺少完整的功能。

**提示词2（优化）**：
```
创建首页组件（HomeScreen.js），包含以下功能：
1. 使用FlatList展示笔记列表
2. 每个笔记项显示：标题、内容预览（最多2行）、分类标签、创建时间、标签列表
3. 点击笔记项跳转到详情页
4. 长按笔记项弹出删除确认对话框
5. 右上角添加搜索、同步、导出按钮
6. 右下角添加FAB（Floating Action Button）用于创建笔记
7. 支持下拉刷新
8. 使用分类颜色标识（学习-绿色、生活-橙色、工作-蓝色、灵感-紫色、其他-灰色）
9. 需要完善的样式设计，使用现代化UI风格
10. 需要完善的错误处理和加载状态
```

**结果**：生成了功能完整的首页组件，包含所有必要的功能和样式。

**学习点**：
- 需要详细说明UI布局和交互
- 需要说明样式设计要求
- 需要明确状态管理（loading、refreshing等）

**提示词3（样式优化）**：
```
优化HomeScreen的样式，要求：
1. 使用卡片式设计展示笔记
2. 添加阴影效果提升层次感
3. 分类标签使用圆角背景色
4. FAB使用圆形按钮，带有阴影效果
5. 使用适当的间距和字体大小
6. 颜色方案：背景#F5F5F5，卡片#FFFFFF，主色#4A90E2
```

**结果**：优化了UI样式，使其更加美观和现代化。

---

### 2.4 创建笔记页（CreateNoteScreen.js）

**目标**：实现笔记创建和编辑功能，包含语音输入

**提示词1（初始）**：
```
创建一个创建笔记页面，支持文本输入和语音输入。
```

**结果**：生成了基础的输入页面，但缺少完整的语音功能。

**提示词2（优化）**：
```
创建笔记创建/编辑页面（CreateNoteScreen.js），包含：
1. 标题输入框
2. 分类选择（横向滚动的按钮组，5个分类：学习、生活、工作、灵感、其他）
3. 内容输入框（多行文本，最小高度200）
4. 语音输入按钮，使用expo-av进行录音，点击开始录音，再次点击停止并转换
5. 标签输入框和添加按钮
6. 标签列表展示（可点击删除）
7. 保存按钮
8. 支持编辑模式（通过route.params.noteId判断）
9. 编辑模式下加载现有笔记数据
10. 使用KeyboardAvoidingView处理键盘遮挡
11. 需要完善的错误处理和加载状态
12. 语音识别为模拟实现，显示提示信息
```

**结果**：生成了功能完整的创建/编辑页面，包含语音输入功能。

**学习点**：
- 需要明确区分创建和编辑模式
- 需要说明键盘处理
- 需要说明语音功能的实现方式

**提示词3（语音功能优化）**：
```
优化语音输入功能：
1. 使用expo-av的Audio.Recording API
2. 录音时显示"停止录音"按钮，非录音时显示"语音输入"按钮
3. 停止录音后调用speechToText函数（当前为模拟）
4. 转换成功后自动添加到内容输入框
5. 自动进行分类和标签提取
6. 显示处理中的加载状态
7. 需要完善的错误处理（权限、录音失败等）
```

**结果**：优化了语音输入功能，添加了完整的交互流程和错误处理。

---

### 2.5 笔记详情页（NoteDetailScreen.js）

**目标**：实现笔记详情展示和管理功能

**提示词1（初始）**：
```
创建一个笔记详情页面。
```

**结果**：生成了基础的详情展示页面。

**提示词2（优化）**：
```
创建笔记详情页面（NoteDetailScreen.js），包含：
1. 标题显示（大字体、加粗）
2. 分类标签（带颜色）
3. 标签列表
4. 内容展示（可滚动）
5. 创建时间和更新时间
6. 导航栏右侧添加编辑、分享、删除按钮
7. 点击编辑跳转到创建页面（编辑模式）
8. 点击分享调用shareNote函数
9. 点击删除弹出确认对话框
10. 需要完善的样式设计
```

**结果**：生成了功能完整的详情页面。

---

### 2.6 搜索页（SearchScreen.js）

**目标**：实现笔记搜索和筛选功能

**提示词1（初始）**：
```
创建一个搜索页面。
```

**结果**：生成了基础的搜索输入框。

**提示词2（优化）**：
```
创建搜索页面（SearchScreen.js），包含：
1. 搜索输入框（自动聚焦）
2. 分类筛选（横向滚动的按钮组，可多选）
3. 搜索结果列表（使用FlatList）
4. 搜索结果高亮匹配内容
5. 每个结果项显示：标题（高亮）、内容预览（高亮）、分类、时间、标签
6. 点击结果项跳转到详情页
7. 支持实时搜索（输入即搜索）
8. 空状态提示
9. 加载状态提示
10. 需要完善的样式设计
```

**结果**：生成了功能完整的搜索页面。

**提示词3（搜索优化）**：
```
优化搜索功能：
1. 搜索支持标题、内容、标签、分类的全文搜索
2. 匹配内容使用高亮背景色（#FFF9C4）
3. 搜索结果按更新时间倒序排列
4. 分类筛选与搜索关键词组合使用
5. 清空搜索时显示空状态提示
```

**结果**：优化了搜索功能，添加了高亮和组合筛选功能。

---

## 3. 辅助功能开发

### 3.1 导出服务（exportService.js）

**目标**：实现笔记导出和分享功能

**提示词1（初始）**：
```
实现笔记导出功能。
```

**结果**：生成了基础的导出功能。

**提示词2（优化）**：
```
创建导出服务模块（exportService.js），使用expo-file-system和expo-sharing，包含：
1. exportNoteAsText(note) - 导出单个笔记为文本文件，格式包含标题、分类、标签、内容、时间
2. shareNote(note) - 分享单个笔记（先导出再分享）
3. exportAllNotes(notes) - 导出所有笔记为一个文本文件，每个笔记用分隔线分隔
4. 文件格式：.txt，编码：UTF-8
5. 需要完善的错误处理
```

**结果**：生成了完整的导出和分享功能。

---

### 3.2 同步服务（syncService.js）

**目标**：实现数据同步功能（模拟）

**提示词1（初始）**：
```
实现数据同步功能。
```

**结果**：生成了基础的同步接口。

**提示词2（优化）**：
```
创建同步服务模块（syncService.js），当前为模拟实现，包含：
1. syncToCloud(notes) - 同步笔记到云端（模拟API调用）
2. syncFromCloud() - 从云端获取笔记（模拟API调用）
3. checkSyncStatus() - 检查同步状态
4. 需要在代码注释中说明如何接入真实API（如Firebase、Supabase等）
5. 提供真实API接入的示例代码（注释形式）
```

**结果**：生成了包含模拟实现和真实API接入说明的同步服务模块。

---

## 4. 文档编写

### 4.1 需求规格说明书

**提示词**：
```
编写一份详细的需求规格说明书，包含：
1. 项目概述（名称、背景、目标）
2. 功能需求（核心功能和辅助功能）
3. 非功能需求（性能、可靠性、可用性、兼容性、安全性、可维护性）
4. 用例图（文本形式）
5. 用户角色
6. 数据需求
7. 接口需求
8. 约束条件
9. 验收标准
10. 附录（术语表、参考资料）
使用Markdown格式，结构清晰，内容完整。
```

**结果**：生成了完整的需求规格说明书。

---

### 4.2 系统设计说明书

**提示词**：
```
编写一份详细的系统设计说明书，包含：
1. 系统概述
2. 系统架构设计（总体架构、架构说明、技术栈）
3. UI/UX设计（设计原则、色彩方案、页面设计、原型图说明）
4. 数据库设计（存储方式、ER图、表结构、数据示例）
5. 模块设计（模块划分、核心模块说明）
6. 接口设计（内部接口、外部接口）
7. 安全设计
8. 性能优化
9. 扩展性设计
10. 测试设计
使用Markdown格式，包含ASCII图表，结构清晰。
```

**结果**：生成了完整的系统设计说明书。

---

## 5. 总结与经验

### 5.1 提示词优化策略

1. **从粗到细**：先给出大致需求，再逐步细化
2. **明确约束**：明确技术栈、数据结构、接口要求
3. **示例说明**：通过示例说明期望的结果
4. **迭代优化**：根据生成结果不断优化提示词

### 5.2 常见问题与解决方案

1. **功能不完整**：明确列出所有需要的功能点
2. **样式不符合预期**：详细说明UI设计要求，提供颜色代码和布局说明
3. **错误处理不完善**：明确要求完善的错误处理
4. **代码注释不足**：明确要求代码注释

### 5.3 AI辅助开发的优势

1. **快速原型**：能够快速生成基础代码结构
2. **代码规范**：生成的代码通常符合最佳实践
3. **功能完整**：能够生成完整的CRUD操作
4. **文档生成**：能够生成规范的文档

### 5.4 注意事项

1. **代码审查**：AI生成的代码需要人工审查和测试
2. **业务逻辑**：复杂的业务逻辑需要人工实现
3. **真实API**：模拟功能需要手动接入真实API
4. **测试验证**：生成的代码需要进行测试验证

---

## 6. 关键提示词模板

### 6.1 创建服务模块
```
创建[模块名称]服务模块（[文件名].js），包含：
1. [功能1描述] - [函数名1]([参数])
2. [功能2描述] - [函数名2]([参数])
3. ...
需要：[要求1]、[要求2]...
使用[技术/库]实现，需要完善的错误处理和代码注释。
```

### 6.2 创建页面组件
```
创建[页面名称]页面组件（[文件名].js），包含：
1. [功能1描述]
2. [功能2描述]
3. ...
UI要求：[样式要求]
交互要求：[交互说明]
需要使用[技术/库]，需要完善的错误处理和加载状态。
```

### 6.3 优化功能
```
优化[功能名称]，要求：
1. [优化点1]
2. [优化点2]
3. ...
需要：[要求说明]
```

---

**文档版本**：v1.0  
**创建日期**：2024年  
**最后更新**：2024年
